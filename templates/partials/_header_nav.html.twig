<nav class="navbar navbar-expand-lg container navbar-light bg-white shadow" data-controller="navbar-dropdown">
    <div class="container-fluid flex-column p-0 px-lg-4">
        <!-- Partie supérieure : logo, recherche, icônes -->
        <div class="d-flex justify-content-between align-items-center w-100 py-2">
            <!-- Logo -->
            <a class="navbar-brand mx-5" href="{{ path('app_home') }}">
                <img src="{{ asset('build/images/logosf.png') }}" alt="Logo" height="32" class="d-inline-block align-top">
                <span class="ms-2 fs-4 d-none d-lg-inline">SF7 Ecommerce Template</span>
            </a>

            <!-- Barre de recherche (affichée en mobile et desktop) -->
            <form class="d-flex mx-auto" style="width: 30%;">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-secondary" type="submit">
                    <i class="bi bi-search"></i>
                </button>
            </form>

            <!-- Icônes (affichées uniquement en desktop) -->
            <div class="d-flex align-items-center d-none d-lg-flex">
                <a href="{{ path('app_account_wishlist') }}" class="btn btn-link text-dark me-3 text-decoration-none">
                    <i class="bi bi-heart"></i>
                    <span class="d-none d-lg-inline">Favorites</span>
                </a>
                <a href="{{ path('app_cart') }}" class="btn btn-link text-dark me-3 position-relative text-decoration-none">
                    <i class="bi bi-cart"></i>
                    <span class="d-none d-lg-inline">My Cart</span>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                        {{ fullCartQuantity }}
                    </span>
                </a>
                <div class="dropdown mx-4">
                    <button class="btn btn-link text-dark dropdown-toggle text-decoration-none" type="button" id="accountDropdown" data-action="click->navbar-dropdown#toggleUserMenu" data-navbar-dropdown-target="userMenuButton">
                        <i class="bi bi-person"></i>
                        <span class="d-none d-lg-inline">My Account</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="accountDropdown" data-navbar-dropdown-target="userDropdownMenu">
                        <li><a class="dropdown-item" href="{{ path('app_account') }}">Dashboard</a></li>
                        <li><a class="dropdown-item" href="{{ path('app_account') }}">Settings</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="{{ path('app_logout') }}">Sign out</a></li>
                    </ul>
                </div>
            </div>

            <!-- Bouton Hamburger pour mobile (visible uniquement en mobile) -->
            <button class="navbar-toggler d-lg-none ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#mobileMenu" aria-expanded="false" aria-controls="mobileMenu" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>

        <!-- Barre de séparation -->
        <div class="border-top w-100"></div>

        <!-- Partie inférieure : liens de navigation (affichée en desktop uniquement) -->
        <div class="collapse navbar-collapse justify-content-between w-100 py-2 d-none d-lg-flex" id="navbarNav">
            <ul class="navbar-nav mx-5">
                <li class="nav-item">
                    <a class="nav-link" href="{{ path('app_home') }}">Home</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="recycledPolyesterDropdown" role="button" data-action="click->navbar-dropdown#toggleDropdown" data-navbar-dropdown-target="dropdownButton">
                        Recycled Polyester
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="recycledPolyesterDropdown" data-navbar-dropdown-target="dropdownMenu">
                        {% for parentCategory in parentCategories %}
                            <li><a class="dropdown-item" href="{{ path('app_category', { slug: parentCategory.slug }) }}">{{ parentCategory.name }}</a></li>
                        {% endfor %}
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="usefulDropdown" role="button" data-action="click->navbar-dropdown#toggleDropdown" data-navbar-dropdown-target="dropdownButton">
                        Useful
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="usefulDropdown" data-navbar-dropdown-target="dropdownMenu">
                        <li><a class="dropdown-item" href="#">Size Guide</a></li>
                        <li><a class="dropdown-item" href="#">Fabric Guide</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">About us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Contact</a>
                </li>
            </ul>
            <div class="dropdown mx-5">
                <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="languageDropdown" data-action="click->navbar-dropdown#toggleLanguage" data-navbar-dropdown-target="languageButton">
                    <img src="https://flagcdn.com/w20/us.png" width="20" height="15" alt="English" class="me-1">
                    <span class="d-none d-lg-inline">English</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="languageDropdown" data-navbar-dropdown-target="languageMenu">
                    <li><a class="dropdown-item" href="#" data-action="click->navbar-dropdown#selectLanguage"><img src="https://flagcdn.com/w20/us.png" width="20" height="15" alt="English" class="me-2">English</a></li>
                    <li><a class="dropdown-item" href="#" data-action="click->navbar-dropdown#selectLanguage"><img src="https://flagcdn.com/w20/fr.png" width="20" height="15" alt="Français" class="me-2">Français</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Menu Mobile (affiché en mobile uniquement avec collapse) -->
    <div class="collapse position-fixed top-0 end-0 bg-white vh-100 vw-100" id="mobileMenu" style="z-index: 1050;">
        <div class="d-flex justify-content-between align-items-center py-3 px-3 border-bottom" style="font-size: 1.2rem;">
            <!-- Icônes de wishlist, cart et account avec badges pour le cart -->
            <a href="{{ path('app_account_wishlist') }}" class="btn text-dark">
                <i class="bi bi-heart" style="font-size: 1.5rem;"></i>
            </a>
            <a href="{{ path('app_cart') }}" class="btn text-dark position-relative">
                <i class="bi bi-cart" style="font-size: 1.5rem;"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                {{ fullCartQuantity }}
            </span>
            </a>
            <a href="{{ path('app_account') }}" class="btn text-dark">
                <i class="bi bi-person" style="font-size: 1.5rem;"></i>
            </a>
            <!-- Bouton pour fermer le menu mobile -->
            <button class="btn text-dark" data-bs-toggle="collapse" data-bs-target="#mobileMenu" aria-label="Close">
                <i class="bi bi-x-lg" style="font-size: 1.5rem;"></i>
            </button>
        </div>

        <!-- Liens en bas dans le menu mobile avec un style premium -->
        <ul class="navbar-nav mt-4 px-3">
            <li class="nav-item py-2 border-bottom">
                <a class="nav-link text-dark fs-5 fw-bold" href="{{ path('app_home') }}">Home</a>
            </li>
            <li class="nav-item dropdown py-2 border-bottom">
                <a class="nav-link dropdown-toggle text-dark fs-5 fw-bold" href="#" id="mobileRecycledPolyesterDropdown" role="button" data-action="click->navbar-dropdown#toggleDropdown" data-navbar-dropdown-target="dropdownButton">
                    Recycled Polyester
                </a>
                <ul class="dropdown-menu border-0 shadow-sm" aria-labelledby="mobileRecycledPolyesterDropdown" data-navbar-dropdown-target="dropdownMenu">
                    {% for parentCategory in parentCategories %}
                        <li><a class="dropdown-item text-dark" href="{{ path('app_category', { slug: parentCategory.slug }) }}">{{ parentCategory.name }}</a></li>
                    {% endfor %}
                </ul>
            </li>
            <li class="nav-item dropdown py-2 border-bottom">
                <a class="nav-link dropdown-toggle text-dark fs-5 fw-bold" href="#" id="mobileUsefulDropdown" role="button" data-action="click->navbar-dropdown#toggleDropdown" data-navbar-dropdown-target="dropdownButton">
                    Useful
                </a>
                <ul class="dropdown-menu border-0 shadow-sm" aria-labelledby="mobileUsefulDropdown" data-navbar-dropdown-target="dropdownMenu">
                    <li><a class="dropdown-item text-dark" href="#">Size Guide</a></li>
                    <li><a class="dropdown-item text-dark" href="#">Fabric Guide</a></li>
                </ul>
            </li>
            <li class="nav-item py-2 border-bottom">
                <a class="nav-link text-dark fs-5 fw-bold" href="#">About us</a>
            </li>
            <li class="nav-item py-2 border-bottom">
                <a class="nav-link text-dark fs-5 fw-bold" href="#">Contact</a>
            </li>
        </ul>
        </div>
    </div>
</nav>
