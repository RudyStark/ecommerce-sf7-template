<nav class="bg-white border-b border-gray-200" data-controller="navbar-dropdown">
    <div class="max-w-screen-xl flex items-center justify-between mx-auto p-2">
        <div class="flex items-center space-x-8 flex-grow">
            <a href="{{ path('app_home') }}" class="flex items-center space-x-3 rtl:space-x-reverse">
                <img src="{{ asset('build/images/logosf.png') }}" class="h-8" alt="Logo" />
                <span class="self-center text-2xl font-semibold whitespace-nowrap">SF7 Ecommerce Template</span>
            </a>
            <div class="hidden md:flex items-center flex-grow max-w-[400px]">
                <input type="search" id="default-search" class="block w-full py-2 px-4 text-sm text-gray-900 bg-gray-100 rounded-full focus:outline-none focus:ring-2 focus:ring-gray-200" placeholder="What can we help you find today?" required>
                <button type="submit" class="p-2 ml-2 text-gray-500 focus:outline-none">
                    <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Bouton hamburger visible uniquement en mobile -->
        <div class="md:hidden">
            <button id="mobile-menu-button" class="p-2 text-gray-500 hover:text-gray-700 focus:outline-none"
                    data-action="click->navbar-dropdown#toggleMobileMenu"
                    data-navbar-dropdown-target="mobileMenuButton">
                <svg id="hamburger-icon" class="w-6 h-6 transition-transform duration-300 ease-in-out" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>

        <div class="navbar-icons hidden md:flex items-center space-x-6">
            {% if app.user %}
                <a href="{{ path('app_account_wishlist') }}" class="icon-item flex items-center">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                    <span class="ml-2">Favorites</span>
                </a>
            {% endif %}
            <div class="icon-item flex items-center">
                <a href="{{ path('app_cart') }}" class="flex items-center">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                    <span class="icon-badge">{{ fullCartQuantity }}</span>
                    <span class="ml-1">My Cart</span>
                </a>
            </div>
            {% if app.user %}
                <div class="icon-item relative flex items-center">
                    <button type="button" class="flex items-center" data-action="click->navbar-dropdown#toggleUserMenu" data-navbar-dropdown-target="userMenuButton" aria-expanded="false">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span class="ml-2">My Account</span>
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>

                    <!-- Menu dropdown -->
                    <div data-navbar-dropdown-target="userDropdownMenu" id="user-dropdown" class="hidden absolute top-6 z-10 bg-white divide-gray-100 rounded-lg shadow w-auto dark:bg-gray-700 dark:divide-gray-600">
                        <div class="px-4 py-3 text-sm text-gray-900 dark:text-white">
                            <div>{{ app.user.firstname }}</div>
                            <div class="font-medium truncate">{{ app.user.email }}</div>
                        </div>
                        <ul class="py-2 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="user-menu-button">
                            <li>
                                <a href="{{ path('app_account') }}" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Dashboard</a>
                            </li>
                            <li>
                                <a href="{{ path('app_account') }}" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Settings</a>
                            </li>
                            <li>
                                <a href="{{ path('app_logout') }}" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Sign out</a>
                            </li>
                        </ul>
                    </div>
                </div>
            {% else %}
                <a href="{{ path('app_account') }}" class="icon-item flex items-center">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span class="ml-2">My Account</span>
                </a>
            {% endif %}
        </div>
    </div>

    <!-- Trait de séparation -->
    <hr class="border-gray-300 my-2" />

    <div class="max-w-screen-xl mx-auto px-4 py-1 hidden md:flex items-center justify-between">
        <ul class="flex items-center space-x-6 text-sm font-medium">
            <li>
                <a href="{{ path('app_home') }}" class="text-gray-900 hover:text-gray-600">Home</a>
            </li>
            <li class="relative">
                <button data-navbar-dropdown-target="dropdownButton" data-action="click->navbar-dropdown#toggleDropdown" class="flex items-center text-gray-900 hover:text-gray-600">
                    Recycled Polyester
                    <svg class="w-4 h-4 ml-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                </button>
                <div data-navbar-dropdown-target="dropdownMenu" class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg hidden z-10">
                    <div class="py-1">
                        {% for parentCategory in parentCategories %}
                            <a href="{{ path('app_category', { slug: parentCategory.slug }) }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">{{ parentCategory.name }}</a>
                        {% endfor %}
                    </div>
                </div>
            </li>
            <li class="relative">
                <button data-navbar-dropdown-target="dropdownButton" data-action="click->navbar-dropdown#toggleDropdown" class="flex items-center text-gray-900 hover:text-gray-600">
                    Useful
                    <svg class="w-4 h-4 ml-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                </button>
                <div data-navbar-dropdown-target="dropdownMenu" class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg hidden z-10">
                    <div class="py-1">
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Size Guide</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Fabric Guide</a>
                    </div>
                </div>
            </li>
            <li>
                <a href="#" class="text-gray-900 hover:text-gray-600">About us</a>
            </li>
            <li>
                <a href="#" class="text-gray-900 hover:text-gray-600">Contact</a>
            </li>
        </ul>
        <div class="relative">
            <button data-navbar-dropdown-target="languageButton" data-action="click->navbar-dropdown#toggleLanguage" class="flex items-center justify-between w-32 text-gray-900 hover:text-gray-600 bg-white border border-gray-300 rounded-md px-3 py-1">
                <span class="flex items-center">
                    <img src="https://flagcdn.com/w20/us.png" width="20" height="15" alt="English" class="mr-2">
                    <span>English</span>
                </span>
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
            </button>
            <div data-navbar-dropdown-target="languageMenu" class="absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg hidden z-10">
                <div class="py-1">
                    <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-action="click->navbar-dropdown#selectLanguage">
                        <img src="https://flagcdn.com/w20/us.png" width="20" height="15" alt="English" class="mr-2">
                        <span>English</span>
                    </a>
                    <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-action="click->navbar-dropdown#selectLanguage">
                        <img src="https://flagcdn.com/w20/fr.png" width="20" height="15" alt="Français" class="mr-2">
                        <span>Français</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Menu mobile -->
    <div id="mobile-menu" class="fixed inset-0 z-50 bg-gray-800 bg-opacity-75 transition-opacity duration-300 ease-in-out opacity-0 pointer-events-none" data-navbar-dropdown-target="mobileMenu">
        <div class="absolute top-0 right-0 w-64 h-full bg-white p-4 shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <div class="flex space-x-4">
                    {% if app.user %}
                        <a href="{{ path('app_account_wishlist') }}" class="text-gray-600 hover:text-gray-900">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                            </svg>
                        </a>
                    {% endif %}
                    <a href="{{ path('app_cart') }}" class="text-gray-600 hover:text-gray-900 relative">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                        <span class="absolute -top-2 -right-2 bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs">{{ fullCartQuantity }}</span>
                    </a>
                    {% if app.user %}
                        <a href="{{ path('app_account') }}" class="text-gray-600 hover:text-gray-900">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </a>
                    {% else %}
                        <a href="{{ path('app_account') }}" class="text-gray-600 hover:text-gray-900">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </a>
                    {% endif %}
                </div>
                <button class="text-gray-600 hover:text-gray-900" data-action="click->navbar-dropdown#toggleMobileMenu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <ul class="space-y-4">
                <li>
                    <a href="{{ path('app_home') }}" class="block text-gray-900 hover:text-gray-600 text-lg font-medium">Home</a>
                </li>
                <li>
                    <button data-action="click->navbar-dropdown#toggleMobileSubmenu" data-submenu-target="recycled-polyester" class="flex items-center justify-between w-full text-gray-900 hover:text-gray-600 text-lg font-medium">
                        Recycled Polyester
                        <svg class="w-4 h-4 ml-1 transform transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                    </button>
                    <div id="recycled-polyester-submenu" class="hidden mt-2 ml-4 space-y-2">
                        {% for parentCategory in parentCategories %}
                            <a href="{{ path('app_category', { slug: parentCategory.slug }) }}" class="block text-gray-700 hover:text-gray-900">{{ parentCategory.name }}</a>
                        {% endfor %}
                    </div>
                </li>
                <li>
                    <button data-action="click->navbar-dropdown#toggleMobileSubmenu" data-submenu-target="useful" class="flex items-center justify-between w-full text-gray-900 hover:text-gray-600 text-lg font-medium">
                        Useful
                        <svg class="w-4 h-4 ml-1 transform transition-transform duration-200" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                    </button>
                    <div id="useful-submenu" class="hidden mt-2 ml-4 space-y-2">
                        <a href="#" class="block text-gray-700 hover:text-gray-900">Size Guide</a>
                        <a href="#" class="block text-gray-700 hover:text-gray-900">Fabric Guide</a>
                    </div>
                </li>
                <li>
                    <a href="#" class="block text-gray-900 hover:text-gray-600 text-lg font-medium">About us</a>
                </li>
                <li>
                    <a href="#" class="block text-gray-900 hover:text-gray-600 text-lg font-medium">Contact</a>
                </li>
            </ul>
        </div>
    </div>



</nav>
